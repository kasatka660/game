!function(e){var t={};function n(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(s,r,function(t){return e[t]}.bind(null,r));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var s='\n  <header>\n    <a href="#"><img class="logo" src="images/youtube_logo.png" alt="youtube"></img></a>\n    <i class="fas fa-search"></i>\n    <form>\n      <input type="search" name="youtubeSearch" placeholder="What are you looking for?">\n    </form>\n  </header> ',r='\n  <div class="container">\n  </div>\n',i='\n  <main>\n    <section class="videosWrapper">\n    </section>\n  </main>\n';const a="https://www.googleapis.com/youtube/v3/search?key=AIzaSyATlq2rGwHi9DIOIQBPtY7ALfU3r8vrCR0&type=video&part=snippet&maxResults=15",o="https://www.googleapis.com/youtube/v3/videos?key=AIzaSyATlq2rGwHi9DIOIQBPtY7ALfU3r8vrCR0&part=statistics";function c(e){return new Promise((t,n)=>{const s=new XMLHttpRequest;s.open("GET",e,!0),s.onload=function(){if(200===this.status)t(this.response);else{const e=new Error(this.statusText);e.code=this.status,n(e)}},s.onerror=(()=>{n(new Error("Network Error"))}),s.send()})}var u=function(e,t){const n=document.createElement("article");return n.classList.add("video"),n.innerHTML=`\n    <img class="thumb" alt="video" src=${e.snippet.thumbnails.medium.url}>\n      <div class="video-info">\n        <a href="https://www.youtube.com/watch?v=${e.id.videoId}"><h2>${e.snippet.title}</h2></a>\n        <p>${e.snippet.description}</p>\n        <div class="author">\n          <i class="fas fa-user-circle"></i>\n          <span>${e.snippet.channelTitle}</span>\n        </div>\n        <div class="date">\n          <i class="far fa-calendar-alt"></i>\n          <span>${e.snippet.publishedAt}</span>\n        </div>\n        <div>\n          <i class="fas fa-eye"></i>\n          <span>${t.viewCount}</span>\n        </div>\n        <div class="likes">\n          <i class="far fa-thumbs-up"></i><br>\n          <span>+ ${t.likeCount}</span>\n        </div>\n        <div class="dislikes">\n          <i class="far fa-thumbs-down"></i><br>\n          <span>- ${t.dislikeCount}</span>\n        </div>\n      </div>`,n};class d{constructor(e,t){this.itemsPerPage=e,this.totalCount=t,this.currentPage=1}getCurrentPage(){return this.currentPage}isLastPage(){return Math.round(this.totalCount/this.itemsPerPage)===this.currentPage+1}setPage(e){this.currentPage=e}setTotalCount(e){this.totalCount=e}getTotalCount(){return this.totalCount}openNextPage(){this.currentPage<this.totalCount/this.itemsPerPage&&(this.currentPage+=1,this.moveVideos(),this.render())}openPrevPage(){this.currentPage>1&&(this.currentPage-=1,this.moveVideos(),this.render())}render(){document.querySelector(".paging")&&document.querySelector(".paging").remove();const e=document.createElement("div");e.classList.add("paging");const t=document.createElement("span");t.classList.add("circle");for(let n=0;n<5;n+=1){const n=t.cloneNode();n.textContent=this.currentPage,e.appendChild(n)}e.children[(this.currentPage-1)%5].classList.add("active"),document.getElementsByTagName("main")[0].appendChild(e),document.querySelector(".videosWrapper").setAttribute("style",`width:calc(${this.getTotalCount()+1} *100% + 20px);`)}moveVideos(){const e=document.getElementsByClassName("video"),t=document.getElementsByTagName("main")[0].offsetWidth,n=(this.currentPage-1)*t+5*this.currentPage;for(let t=0;t<e.length;t+=1)e[t].setAttribute("style",`transform:translateX(-${n}px)`)}}class l{constructor(){this.nextPageToken="",this.searchString="",this.pager={},this.videos=[]}startSearch(e,t=!1){if(t){this.searchString=e,this.nextPageToken="";const t=document.getElementsByTagName("main")[0].offsetWidth;this.pager=new d(t<1e3?1:3,15),this.videos=[],document.getElementsByClassName("video").length&&(document.querySelector(".videosWrapper").innerHTML="")}const n=encodeURIComponent(this.searchString);c(`${a}&q=${n}${this.nextPageToken?`&pageToken=${this.nextPageToken}`:""}`).then(e=>{const t=JSON.parse(e);this.nextPageToken=t.nextPageToken,this.videos=this.videos.concat(t.items);const n=t.items.map(e=>e.id.videoId);c(`${o}&id=${n.join(",")}`).then(e=>{const n=JSON.parse(e);this.render(t,n)})})}nextPage(){this.pager.isLastPage()&&this.nextPageToken?(this.startSearch(this.searchString),this.pager.openNextPage()):this.pager.openNextPage()}prevPage(){this.pager.openPrevPage()}getCurrentPage(){this.pager.getCurrentPage()}render(e,t){this.pager.setTotalCount(this.videos.length),e.items.map((n,s)=>u(e.items[s],t.items[s].statistics)).map(e=>document.querySelector(".videosWrapper").appendChild(e)),this.pager.render()}}class h{constructor(){this.search=new l,this.x0=null,this.page=0}init(){document.body.innerHTML=r,document.querySelector(".container").innerHTML=s+i,this.addFormListener(),this.addSwipeListeners()}addFormListener(){this.form=document.querySelector("form"),this.form.addEventListener("submit",e=>{e.preventDefault(),this.search.startSearch(h.getInputValue(),!0)})}addSwipeListeners(){const e=this;let t=null;function n(e){return e.changedTouches?e.changedTouches[0]:e}function s(e){t=n(e).clientX}function r(s){if(t){const r=n(s).clientX-t,i=Math.sign(r);t=null,i<0?e.search.nextPage():e.search.prevPage()}}document.querySelector(".videosWrapper").addEventListener("mousedown",s),document.querySelector(".videosWrapper").addEventListener("touchstart",s),document.querySelector(".videosWrapper").addEventListener("mouseup",r),document.querySelector(".videosWrapper").addEventListener("touchend",r),document.querySelector(".videosWrapper").addEventListener("touchmove",e=>{e.preventDefault()},!1)}static getInputValue(){return document.getElementsByName("youtubeSearch")[0].value}}(new h).init()}]);
//# sourceMappingURL=app.bundle.js.map